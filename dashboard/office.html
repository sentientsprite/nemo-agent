<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üè¢ NEMO Virtual Office | Mission Control</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { 
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; 
    background: linear-gradient(135deg, #0a0e17 0%, #1a1f2e 100%);
    color: #e0e0e0; 
    min-height: 100vh;
    overflow-x: hidden;
  }
  
  .header {
    background: rgba(10, 14, 23, 0.95);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid #1e2a42;
    padding: 16px 24px;
    position: sticky;
    top: 0;
    z-index: 100;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .header h1 { 
    color: #00d4ff; 
    font-size: 1.4em;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .header-stats {
    display: flex;
    gap: 20px;
    font-size: 0.85em;
  }
  
  .header-stat {
    display: flex;
    align-items: center;
    gap: 6px;
  }
  
  .header-stat .dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
  }
  
  .dot.active { background: #00e676; box-shadow: 0 0 8px #00e676; }
  .dot.idle { background: #ffd740; }
  .dot.offline { background: #ff5252; }
  
  .nav-links {
    display: flex;
    gap: 16px;
  }
  
  .nav-links a {
    color: #8892a4;
    text-decoration: none;
    font-size: 0.9em;
    padding: 6px 12px;
    border-radius: 6px;
    transition: all 0.2s;
  }
  
  .nav-links a:hover {
    color: #00d4ff;
    background: rgba(0, 212, 255, 0.1);
  }
  
  .office-container {
    padding: 24px;
    max-width: 1600px;
    margin: 0 auto;
  }
  
  .office-layout {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 20px;
    margin-top: 20px;
  }
  
  @media (max-width: 1200px) {
    .office-layout { grid-template-columns: repeat(3, 1fr); }
  }
  
  @media (max-width: 900px) {
    .office-layout { grid-template-columns: repeat(2, 1fr); }
  }
  
  @media (max-width: 600px) {
    .office-layout { grid-template-columns: 1fr; }
  }
  
  .agent-desk {
    background: linear-gradient(145deg, #141b2d 0%, #1a2332 100%);
    border-radius: 16px;
    padding: 20px;
    border: 1px solid #1e2a42;
    position: relative;
    transition: all 0.3s ease;
    overflow: hidden;
  }
  
  .agent-desk:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 32px rgba(0, 212, 255, 0.15);
    border-color: #00d4ff44;
  }
  
  .agent-desk.active::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, #00e676, #00d4ff);
    animation: pulse 2s infinite;
  }
  
  .agent-desk.working::before {
    background: linear-gradient(90deg, #448aff, #00d4ff);
  }
  
  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }
  
  .agent-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 16px;
  }
  
  .agent-avatar {
    width: 48px;
    height: 48px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5em;
    background: linear-gradient(135deg, #1e2a42 0%, #2a3a52 100%);
    border: 2px solid #2a3a52;
  }
  
  .agent-desk.active .agent-avatar {
    border-color: #00e676;
    box-shadow: 0 0 16px rgba(0, 230, 118, 0.3);
  }
  
  .agent-info h3 {
    font-size: 1em;
    color: #fff;
    margin-bottom: 2px;
  }
  
  .agent-role {
    font-size: 0.75em;
    color: #8892a4;
  }
  
  .status-badge {
    position: absolute;
    top: 16px;
    right: 16px;
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 0.7em;
    font-weight: 600;
    text-transform: uppercase;
  }
  
  .status-badge.active {
    background: #00e67622;
    color: #00e676;
    border: 1px solid #00e67644;
  }
  
  .status-badge.idle {
    background: #ffd74022;
    color: #ffd740;
    border: 1px solid #ffd74044;
  }
  
  .status-badge.offline {
    background: #ff525222;
    color: #ff5252;
    border: 1px solid #ff525244;
  }
  
  .current-task {
    background: rgba(0, 212, 255, 0.05);
    border-radius: 8px;
    padding: 12px;
    margin-bottom: 12px;
    border-left: 3px solid #00d4ff;
  }
  
  .current-task-label {
    font-size: 0.7em;
    color: #8892a4;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 4px;
  }
  
  .current-task-text {
    font-size: 0.85em;
    color: #e0e0e0;
    line-height: 1.4;
  }
  
  .task-meta {
    display: flex;
    gap: 12px;
    margin-top: 8px;
    font-size: 0.75em;
    color: #8892a4;
  }
  
  .task-queue {
    margin-top: 12px;
  }
  
  .queue-label {
    font-size: 0.75em;
    color: #8892a4;
    margin-bottom: 8px;
    display: flex;
    align-items: center;
    gap: 6px;
  }
  
  .queue-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 6px 10px;
    background: rgba(30, 42, 66, 0.5);
    border-radius: 6px;
    margin-bottom: 6px;
    font-size: 0.8em;
    color: #b0b8c8;
  }
  
  .queue-item::before {
    content: '‚Ä¢';
    color: #8892a4;
  }
  
  .metrics-row {
    display: flex;
    gap: 16px;
    margin-top: 12px;
    padding-top: 12px;
    border-top: 1px solid #1e2a42;
  }
  
  .metric {
    display: flex;
    flex-direction: column;
  }
  
  .metric-value {
    font-size: 1.1em;
    font-weight: 600;
    color: #fff;
  }
  
  .metric-label {
    font-size: 0.7em;
    color: #8892a4;
  }
  
  /* Special zones */
  .command-center {
    grid-column: span 2;
    background: linear-gradient(145deg, #1a2332 0%, #0f1620 100%);
    border: 2px solid #00d4ff44;
  }
  
  .command-center .agent-avatar {
    background: linear-gradient(135deg, #00d4ff22 0%, #00e67622 100%);
    border-color: #00d4ff;
  }
  
  /* Activity feed */
  .activity-feed {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 380px;
    max-height: 300px;
    background: rgba(10, 14, 23, 0.95);
    backdrop-filter: blur(10px);
    border: 1px solid #1e2a42;
    border-radius: 12px;
    padding: 16px;
    overflow-y: auto;
  }
  
  .activity-header {
    font-size: 0.85em;
    color: #8892a4;
    margin-bottom: 12px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .activity-item {
    display: flex;
    gap: 10px;
    padding: 8px 0;
    border-bottom: 1px solid #1e2a42;
    font-size: 0.8em;
    animation: slideIn 0.3s ease;
  }
  
  @keyframes slideIn {
    from { opacity: 0; transform: translateX(10px); }
    to { opacity: 1; transform: translateX(0); }
  }
  
  .activity-item:last-child { border-bottom: none; }
  
  .activity-time {
    color: #555;
    font-size: 0.85em;
    min-width: 50px;
  }
  
  .activity-agent {
    color: #00d4ff;
    font-weight: 500;
  }
  
  .activity-text {
    color: #b0b8c8;
  }
  
  /* Loading shimmer */
  .shimmer {
    background: linear-gradient(90deg, #1e2a42 25%, #2a3a52 50%, #1e2a42 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
  }
  
  @keyframes shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }
  
  /* Toast notifications */
  .toast-container {
    position: fixed;
    top: 80px;
    right: 20px;
    display: flex;
    flex-direction: column;
    gap: 8px;
    z-index: 200;
  }
  
  .toast {
    background: rgba(20, 27, 45, 0.95);
    border: 1px solid #1e2a42;
    border-radius: 8px;
    padding: 12px 16px;
    min-width: 280px;
    animation: toastIn 0.3s ease;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  @keyframes toastIn {
    from { opacity: 0; transform: translateX(100%); }
    to { opacity: 1; transform: translateX(0); }
  }
  
  .toast-icon { font-size: 1.2em; }
  .toast.success { border-color: #00e67644; }
  .toast.warning { border-color: #ffd74044; }
  .toast.error { border-color: #ff525244; }
  
  .last-updated {
    text-align: center;
    padding: 20px;
    color: #555;
    font-size: 0.8em;
  }
</style>
</head>
<body>
<div class="header">
  <h1>üè¢ NEMO Virtual Office</h1>
  <div class="header-stats">
    <div class="header-stat">
      <div class="dot active"></div>
      <span id="activeCount">0 Active</span>
    </div>
    <div class="header-stat">
      <div class="dot idle"></div>
      <span id="idleCount">0 Idle</span>
    </div>
    <div class="header-stat">
      <div class="dot offline"></div>
      <span id="offlineCount">0 Offline</span>
    </div>
  </div>
  <div class="nav-links">
    <a href="index.html">üìä Dashboard</a>
    <a href="office.html" style="color: #00d4ff;">üè¢ Office</a>
    <a href="office-8bit.html" style="color: #ffcd75;">üéÆ 8-Bit</a>
    <a href="trading.html">üìà Trading</a>
  </div>
</div>

<div class="office-container">
  <div class="office-layout" id="officeLayout">
    <!-- Agent desks will be rendered here -->
  </div>
</div>

<div class="activity-feed" id="activityFeed">
  <div class="activity-header">
    <span>üî¥ Live Activity</span>
    <span style="font-size: 0.75em; color: #00e676;">‚óè Real-time</span>
  </div>
  <div id="activityList"></div>
</div>

<div class="toast-container" id="toastContainer"></div>

<div class="last-updated" id="lastUpdated"></div>

<script>
// Agent configuration
const agents = {
  commander: {
    name: "Commander",
    role: "Orchestrator",
    emoji: "üéØ",
    description: "Central task router and delegation hub",
    status: "active",
    currentTask: "Coordinating multi-agent operations",
    queue: ["Monitor 24hr trading test", "Route research tasks"],
    metrics: { tasksDelegated: 47, successRate: "94%" }
  },
  researcher: {
    name: "Researcher",
    role: "Intelligence Gatherer",
    emoji: "üî¨",
    description: "Gathers market intelligence and competitor analysis",
    status: "active",
    currentTask: "Monitoring X/Twitter for trading sentiment",
    queue: ["Polymarket strategy research", "Kalshi market analysis"],
    metrics: { reportsGenerated: 12, insightsFound: 8 }
  },
  coder: {
    name: "Coder",
    role: "Implementation Engineer",
    emoji: "üíª",
    description: "Builds and maintains trading infrastructure",
    status: "active",
    currentTask: "Building Virtual Agent Office dashboard",
    queue: ["Integrate Kelly sizing", "Volatility regime detector", "Macro regime model"],
    metrics: { commitsToday: 5, modulesBuilt: 3 }
  },
  trader: {
    name: "Trader",
    role: "Execution Agent",
    emoji: "üìà",
    description: "Executes trades across all markets",
    status: "active",
    currentTask: "Running 24hr Snipe + Maker dry-run test",
    queue: ["Await live trading approval", "Monitor positions"],
    metrics: { tradesToday: 23, winRate: "TBD", pnl: "+0.0% (dry-run)" }
  },
  analyst: {
    name: "Analyst",
    role: "Data Scientist",
    emoji: "üìä",
    description: "Performs quantitative analysis and backtesting",
    status: "idle",
    currentTask: "Awaiting 24hr test results for analysis",
    queue: ["Analyze Snipe + Maker performance", "Compare strategy variants"],
    metrics: { backtestsRun: 8, modelsTrained: 2 }
  },
  security: {
    name: "Security",
    role: "Guardian",
    emoji: "üõ°Ô∏è",
    description: "Monitors system security and risk exposure",
    status: "active",
    currentTask: "Running daily security audit",
    queue: ["Review VPIN toxicity alerts", "Monitor API key rotation"],
    metrics: { auditsCompleted: 1, threatsBlocked: 0 }
  },
  writer: {
    name: "Writer",
    role: "Communications",
    emoji: "‚úçÔ∏è",
    description: "Handles documentation and external communications",
    status: "idle",
    currentTask: "Standing by for reports",
    queue: ["Daily P&L report (tonight)", "Strategy documentation"],
    metrics: { docsUpdated: 3, tweetsDrafted: 0 }
  },
  monitor: {
    name: "Monitor",
    role: "System Watcher",
    emoji: "üëÅÔ∏è",
    description: "Monitors system health and trading bot status",
    status: "active",
    currentTask: "Hourly health checks on trading bot",
    queue: ["Log analysis", "Alert on anomalies"],
    metrics: { checksPerformed: 18, alertsSent: 0 }
  },
  planner: {
    name: "Planner",
    role: "Strategist",
    emoji: "üó∫Ô∏è",
    description: "Develops long-term strategy and roadmaps",
    status: "idle",
    currentTask: "Planning Phase 2 of Mission Control",
    queue: ["Q1 2026 roadmap", "Capability expansion plan"],
    metrics: { plansCreated: 2, milestonesSet: 12 }
  },
  learner: {
    name: "Learner",
    role: "Self-Improver",
    emoji: "üß†",
    description: "Analyzes outcomes and improves strategies",
    status: "idle",
    currentTask: "Analyzing night shift operation results",
    queue: ["Extract lessons from sub-agent failures", "Optimize model routing"],
    metrics: { lessonsLearned: 5, improvementsMade: 4 }
  }
};

let activities = [];

function renderOffice() {
  const layout = document.getElementById('officeLayout');
  let activeCount = 0, idleCount = 0, offlineCount = 0;
  
  layout.innerHTML = Object.entries(agents).map(([id, agent]) => {
    // Count statuses
    if (agent.status === 'active') activeCount++;
    else if (agent.status === 'idle') idleCount++;
    else offlineCount++;
    
    // Special styling for Commander
    const isCommander = id === 'commander';
    const deskClass = `agent-desk ${agent.status} ${isCommander ? 'command-center' : ''}`;
    
    return `
      <div class="${deskClass}" data-agent="${id}">
        <span class="status-badge ${agent.status}">${agent.status}</span>
        <div class="agent-header">
          <div class="agent-avatar">${agent.emoji}</div>
          <div class="agent-info">
            <h3>${agent.name}</h3>
            <div class="agent-role">${agent.role}</div>
          </div>
        </div>
        
        <div class="current-task">
          <div class="current-task-label">Current Task</div>
          <div class="current-task-text">${agent.currentTask}</div>
          <div class="task-meta">
            <span>‚è±Ô∏è Just now</span>
            <span>üí∞ Cost: ~$0.004</span>
          </div>
        </div>
        
        <div class="task-queue">
          <div class="queue-label">üìã Queue (${agent.queue.length})</div>
          ${agent.queue.map(task => `<div class="queue-item">${task}</div>`).join('')}
        </div>
        
        <div class="metrics-row">
          ${Object.entries(agent.metrics).map(([key, val]) => `
            <div class="metric">
              <div class="metric-value">${val}</div>
              <div class="metric-label">${key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())}</div>
            </div>
          `).join('')}
        </div>
      </div>
    `;
  }).join('');
  
  // Update header stats
  document.getElementById('activeCount').textContent = `${activeCount} Active`;
  document.getElementById('idleCount').textContent = `${idleCount} Idle`;
  document.getElementById('offlineCount').textContent = `${offlineCount} Offline`;
}

function addActivity(agent, action) {
  const time = new Date().toLocaleTimeString('en-US', { hour12: false, hour: '2-digit', minute: '2-digit' });
  activities.unshift({ time, agent, action });
  if (activities.length > 10) activities.pop();
  renderActivities();
}

function renderActivities() {
  const list = document.getElementById('activityList');
  list.innerHTML = activities.map(a => `
    <div class="activity-item">
      <span class="activity-time">${a.time}</span>
      <span class="activity-agent">${agents[a.agent]?.name || a.agent}</span>
      <span class="activity-text">${a.action}</span>
    </div>
  `).join('');
}

function showToast(message, type = 'success') {
  const container = document.getElementById('toastContainer');
  const icons = { success: '‚úÖ', warning: '‚ö†Ô∏è', error: '‚ùå', info: '‚ÑπÔ∏è' };
  const toast = document.createElement('div');
  toast.className = `toast ${type}`;
  toast.innerHTML = `<span class="toast-icon">${icons[type]}</span><span>${message}</span>`;
  container.appendChild(toast);
  setTimeout(() => toast.remove(), 5000);
}

// Simulate live activity
function simulateActivity() {
  const agentKeys = Object.keys(agents);
  const actions = [
    { agent: 'researcher', action: 'Scanned X for sentiment signals', type: 'info' },
    { agent: 'trader', action: 'Executed dry-run trade on BTC market', type: 'success' },
    { agent: 'monitor', action: 'Completed hourly health check', type: 'info' },
    { agent: 'security', action: 'Verified API key integrity', type: 'success' },
    { agent: 'coder', action: 'Committed changes to repository', type: 'success' },
    { agent: 'analyst', action: 'Updated volatility metrics', type: 'info' },
    { agent: 'writer', action: 'Drafted strategy documentation', type: 'info' }
  ];
  
  const randomAction = actions[Math.floor(Math.random() * actions.length)];
  addActivity(randomAction.agent, randomAction.action);
  
  // Occasionally show toast for important events
  if (Math.random() < 0.1) {
    showToast(`${agents[randomAction.agent].name}: ${randomAction.action}`, randomAction.type);
  }
}

// Initial render
renderOffice();

// Add initial activities
addActivity('commander', 'Virtual Office initialized');
addActivity('coder', 'Started building office dashboard');
addActivity('trader', '24hr Snipe + Maker test running');

// Simulate live updates
setInterval(simulateActivity, 8000);

// Update timestamp
document.getElementById('lastUpdated').textContent = 'Last updated: ' + new Date().toLocaleString();
setInterval(() => {
  document.getElementById('lastUpdated').textContent = 'Last updated: ' + new Date().toLocaleString();
}, 30000);

// Refresh data periodically (would fetch from API in production)
setInterval(() => {
  // In real implementation, this would fetch from data.json or an API
  // For now, we just re-render with current state
  renderOffice();
}, 30000);

console.log('üè¢ NEMO Virtual Office loaded. 10 agents standing by.');
</script>
</body>
</html>
